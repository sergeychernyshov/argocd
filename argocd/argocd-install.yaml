apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: argocd
  namespace: argocd   # –≤–∞–∂–Ω–æ: Argo CD –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ —ç—Ç–æ—Ç namespace
  finalizers:
    - resources-finalizer.argocd.argoproj.io
spec:
  project: default
 
  source:
    repoURL: https://github.com/sergeychernyshov/argocd.git   # üîÅ –∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
    targetRevision: main                                        # –≤–µ—Ç–∫–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
    path: argocd                                               # –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É —Å values.yaml (—Å–º. –Ω–∏–∂–µ)
    helm:
      releaseName: argocd
      chart: argo-cd
      repoURL: https://argoproj.github.io/argo-helm
      version: 7.6.12
      valueFiles:
        - values.yaml
 
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd
 
  syncPolicy:
    automated:
      prune: true           # —É–¥–∞–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ Git
      selfHeal: true        # —Å–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ —á—Ç–æ-—Ç–æ –ø–æ–º–µ–Ω—è–ª –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
    syncOptions:
      - CreateNamespace=true
      - ServerSideApply=true
 